{% extends "layout.html" %}
{% macro input(field)  -%}
  <div class="form-group">
    {{ field.label }}
    {% if field.description or field.flags.required %}
      {{ field(class="form-control", **{'aria-describedby': field.label.text|slugify~"Help"}) }}
      <small id="{{field.label.text|slugify~'Help'}}" class="form-text text-muted">
        {{ field.description }} {% if field.flags.required %}(required){% endif %}
      </small>
    {% else %}
      {{ field(class="form-control") }}
    {% endif %}
  </div>
{%- endmacro  %}

{% block body %}
    {% if session.logged_in %}
        You're already registered ;)
    {% else %}
    <div style="max-width: 500px">
    <form method="POST" action="{{ url_for('auth.register') }}">
        {{ form.csrf_token }}
        <div class="form-group">
          {{ form.token.label }}
          {% if token %}{{ form.token(value=token, disabled=True, class="form-control") }}{% else %}{{ form.token(class="form-control") }}{% endif %}
          <small id="{{form.token.label.text|slugify~'Help'}}" class="form-text text-muted">{{ form.token.description }} (required)</small>
        </div>
        {{ input(form.name) }}
        {{ input(form.password) }}
        {{ input(form.confirm) }}
        {{ input(form.email) }}
        {{ input(form.gender) }}
        <button id="registerButton" class="btn btn-primary" type=submit>Hit me!</button>
      </form>
    </div>

    {% endif %}
{% endblock %}